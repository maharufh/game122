<!DOCTYPE html>
<html lang="en">
<head>
    <title>Change Password</title>
    <link rel="stylesheet" href="/style">
</head>
<body>

    <nav>
        <div>
          <a href="/home">Home</a>
          <a href="/about">About</a>
          <a href="/signup">Sign up</a>
          <a href="/login">Login</a>
          <a href="/password">change Password</a>
          <a href="/delete">Delete email</a>
        </div>
      </nav>

<h1>CHANGE PASSWORD</h1>

<form id="changeForm">
    <input type="text" placeholder="Email" id="email">
    <input type="password" placeholder="Old Password" id="password">
    <input type="password" placeholder="New Password" id="newPassword">
    <button type="submit">Change Password</button>
</form>

<script>
const emailTag = document.getElementById("email");
const passTag = document.getElementById("password");
const newPassTag = document.getElementById("newPassword");
const form = document.getElementById("changeForm");

form.addEventListener("submit", async (e) => {
    e.preventDefault();

    if (!emailTag.value || !passTag.value || !newPassTag.value) {
        return alert("All fields are required");
    }

    const user = {
        email: emailTag.value,
        oldPassword: passTag.value,      
        newPassword: newPassTag.value
    };

    const res = await fetch("/changePassword", {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(user)
    });

    const data = await res.json();
    alert(data.message);

    emailTag.value = "";
    passTag.value = "";
    newPassTag.value = "";
});
</script>

</body>
</html>
